"use strict";(globalThis.webpackChunkrobotic_book=globalThis.webpackChunkrobotic_book||[]).push([[779],{3966:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"module1-ros2/bridging-external-agents","title":"Bridging External Python Agents to ROS 2 Controllers","description":"This chapter explores how to integrate external Python applications, including advanced AI agents like Large Language Models (LLMs), with your ROS 2 robot control system. You will learn to design communication interfaces that enable high-level decision-making processes to influence real-time robot behavior.","source":"@site/docs/module1-ros2/07-bridging-external-agents.mdx","sourceDirName":"module1-ros2","slug":"/module1-ros2/bridging-external-agents","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/bridging-external-agents","draft":false,"unlisted":false,"editUrl":"https://github.com/yourusername/physical-ai-humanoid-book/tree/main/docs/module1-ros2/07-bridging-external-agents.mdx","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Launch Files, Parameters, and RViz2 Debugging","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/launch-files-rviz"},"next":{"title":"Module 2 \u2013 The Digital Twin (Gazebo & Unity)","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module2-digital-twin/"}}');var o=i(4848),l=i(8453);const r={},s="Bridging External Python Agents to ROS 2 Controllers",a={},c=[{value:"Why Bridge External Agents?",id:"why-bridge-external-agents",level:2},{value:"Communication Patterns for Bridging",id:"communication-patterns-for-bridging",level:2},{value:"Example: LLM-driven Goal Setter (Conceptual Integration)",id:"example-llm-driven-goal-setter-conceptual-integration",level:2},{value:"<code>examples/python_agent.py</code>",id:"examplespython_agentpy",level:3},{value:"How this Integrates with a ROS 2 Action Server (Conceptual)",id:"how-this-integrates-with-a-ros-2-action-server-conceptual",level:3},{value:"How to Run the Example Agent",id:"how-to-run-the-example-agent",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"bridging-external-python-agents-to-ros-2-controllers",children:"Bridging External Python Agents to ROS 2 Controllers"})}),"\n",(0,o.jsx)(n.p,{children:"This chapter explores how to integrate external Python applications, including advanced AI agents like Large Language Models (LLMs), with your ROS 2 robot control system. You will learn to design communication interfaces that enable high-level decision-making processes to influence real-time robot behavior."}),"\n",(0,o.jsx)(n.h2,{id:"why-bridge-external-agents",children:"Why Bridge External Agents?"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Advanced AI"}),": Integrating sophisticated AI algorithms (e.g., path planning, natural language understanding)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Modularity"}),": Decoupling complex decision-making from low-level control loops."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Flexibility"}),": Easily swapping out different AI components without altering core robot code."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"communication-patterns-for-bridging",children:"Communication Patterns for Bridging"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ROS 2 Topics"}),": Publishing high-level goals and subscribing to robot feedback."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"ROS 2 Actions"}),': Implementing goal-based interactions for complex tasks (e.g., "move to kitchen", "pick up cup").']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Custom ROS 2 Interfaces"}),": Defining messages and services specifically for agent-robot communication."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"example-llm-driven-goal-setter-conceptual-integration",children:"Example: LLM-driven Goal Setter (Conceptual Integration)"}),"\n",(0,o.jsxs)(n.p,{children:["This example utilizes a simple Python agent (",(0,o.jsx)(n.code,{children:"examples/python_agent.py"}),') to simulate a high-level decision-making process (like that of an LLM). This agent publishes periodic high-level goals (e.g., "wave", "stand", "bow") to a ROS 2 topic. While a full ROS 2 Action Server implementation is outside the scope of this particular chapter, this example illustrates the communication interface.']}),"\n",(0,o.jsx)(n.h3,{id:"examplespython_agentpy",children:(0,o.jsx)(n.code,{children:"examples/python_agent.py"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:"# examples/python_agent.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass SimplePythonAgent(Node):\r\n    def __init__(self):\r\n        super().__init__('simple_python_agent')\r\n        self.publisher_ = self.create_publisher(String, 'high_level_goals', 10)\r\n        timer_period = 1.0  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        goals = [\"wave\", \"stand\", \"bow\"]\r\n        msg.data = goals[self.i % len(goals)]\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing high-level goal: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    simple_agent = SimplePythonAgent()\r\n    rclpy.spin(simple_agent)\r\n    simple_agent.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,o.jsx)(n.h3,{id:"how-this-integrates-with-a-ros-2-action-server-conceptual",children:"How this Integrates with a ROS 2 Action Server (Conceptual)"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Agent Publishes Goal"}),": The ",(0,o.jsx)(n.code,{children:"SimplePythonAgent"})," node publishes a ",(0,o.jsx)(n.code,{children:"String"}),' message containing a high-level goal (e.g., "wave") to the ',(0,o.jsx)(n.code,{children:"/high_level_goals"})," topic."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Action Server Subscribes"}),": A dedicated ROS 2 Action Server (e.g., ",(0,o.jsx)(n.code,{children:"humanoid_action_server"}),") would subscribe to ",(0,o.jsx)(n.code,{children:"/high_level_goals"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Action Server Processes Goal"}),": Upon receiving a goal, the Action Server:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Parses the ",(0,o.jsx)(n.code,{children:"String"})," command."]}),"\n",(0,o.jsx)(n.li,{children:'Initiates a long-running action (e.g., a "Wave" action).'}),"\n",(0,o.jsx)(n.li,{children:'Provides feedback to the agent (e.g., "Waving arms...").'}),"\n",(0,o.jsx)(n.li,{children:'Sends a result upon completion (e.g., "Wave action completed successfully").'}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"how-to-run-the-example-agent",children:"How to Run the Example Agent"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Open a terminal and source your ROS 2 environment."}),"\n",(0,o.jsxs)(n.li,{children:["Run the simple Python agent:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"python3 examples/python_agent.py\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["In another terminal, you can listen to the topic to see the goals being published:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /high_level_goals\n"})}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["You will see the ",(0,o.jsx)(n.code,{children:"SimplePythonAgent"})," publishing cyclic goals, simulating an external intelligence guiding your robot."]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var t=i(6540);const o={},l=t.createContext(o);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);
"use strict";(globalThis.webpackChunkrobotic_book=globalThis.webpackChunkrobotic_book||[]).push([[955],{3435:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"module1-ros2/launch-files-rviz","title":"Launch Files, Parameters, and RViz2 Debugging","description":"This chapter covers the essential tools and techniques for orchestrating ROS 2 applications, managing runtime configurations, and visualizing your robot in a simulated environment using RViz2.","source":"@site/docs/module1-ros2/06-launch-files-rviz.mdx","sourceDirName":"module1-ros2","slug":"/module1-ros2/launch-files-rviz","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/launch-files-rviz","draft":false,"unlisted":false,"editUrl":"https://github.com/yourusername/physical-ai-humanoid-book/tree/main/docs/module1-ros2/06-launch-files-rviz.mdx","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"URDF & Xacro Modeling for Humanoid Robots","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/urdf-xacro-modeling"},"next":{"title":"Bridging External Python Agents to ROS 2 Controllers","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/bridging-external-agents"}}');var a=r(4848),o=r(8453);const s={},l="Launch Files, Parameters, and RViz2 Debugging",c={},t=[{value:"ROS 2 Launch Files",id:"ros-2-launch-files",level:2},{value:"ROS 2 Parameters",id:"ros-2-parameters",level:2},{value:"RViz2 for Visualization and Debugging",id:"rviz2-for-visualization-and-debugging",level:2},{value:"Example: Humanoid Launch File for RViz2 Visualization",id:"example-humanoid-launch-file-for-rviz2-visualization",level:2},{value:"1. Create the Launch Package Structure",id:"1-create-the-launch-package-structure",level:3},{value:"2. Package Configuration Files",id:"2-package-configuration-files",level:3},{value:"<code>package.xml</code>",id:"packagexml",level:4},{value:"<code>CMakeLists.txt</code>",id:"cmakeliststxt",level:4},{value:"3. Launch File (<code>humanoid_view.launch.py</code>)",id:"3-launch-file-humanoid_viewlaunchpy",level:3},{value:"4. How to Build and Run",id:"4-how-to-build-and-run",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"launch-files-parameters-and-rviz2-debugging",children:"Launch Files, Parameters, and RViz2 Debugging"})}),"\n",(0,a.jsx)(n.p,{children:"This chapter covers the essential tools and techniques for orchestrating ROS 2 applications, managing runtime configurations, and visualizing your robot in a simulated environment using RViz2."}),"\n",(0,a.jsx)(n.h2,{id:"ros-2-launch-files",children:"ROS 2 Launch Files"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Purpose"}),": Automating the startup of multiple ROS 2 nodes and processes."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Syntax"}),": Understanding Python-based launch files."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Nodes and Components"}),": Launching individual nodes and composed nodes."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Parameters"}),": Passing arguments and configurations to nodes."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Includes"}),": Modularizing launch files."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"ros-2-parameters",children:"ROS 2 Parameters"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Declaring Parameters"}),": Defining parameters within your nodes."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Setting Parameters"}),": Using launch files and ",(0,a.jsx)(n.code,{children:"ros2 param set"})," commands."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Getting Parameters"}),": Accessing parameters within your nodes."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"rviz2-for-visualization-and-debugging",children:"RViz2 for Visualization and Debugging"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Purpose"}),": A powerful 3D visualization tool for ROS 2."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Displays"}),": Visualizing robot models (URDF), sensor data (point clouds, images), topics, and frames."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Debugging"}),": Identifying coordinate frame issues, sensor misalignments, and unexpected robot behavior."]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"example-humanoid-launch-file-for-rviz2-visualization",children:"Example: Humanoid Launch File for RViz2 Visualization"}),"\n",(0,a.jsx)(n.p,{children:"This example demonstrates how to create a Python-based ROS 2 launch file to:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Process a Xacro file to generate the robot description."}),"\n",(0,a.jsxs)(n.li,{children:["Start the ",(0,a.jsx)(n.code,{children:"robot_state_publisher"})," node to broadcast the robot's transformations."]}),"\n",(0,a.jsx)(n.li,{children:"Launch RViz2 for 3D visualization of the robot model."}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"1-create-the-launch-package-structure",children:"1. Create the Launch Package Structure"}),"\n",(0,a.jsxs)(n.p,{children:["First, create the following directory structure in your ROS 2 workspace ",(0,a.jsx)(n.code,{children:"src"})," folder (or in ",(0,a.jsx)(n.code,{children:"examples/ros2_launch_example/"})," as we've done here):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"examples/ros2_launch_example/\r\n\u2514\u2500\u2500 humanoid_launch/\r\n    \u251c\u2500\u2500 package.xml\r\n    \u251c\u2500\u2500 CMakeLists.txt\r\n    \u2514\u2500\u2500 launch/\r\n        \u2514\u2500\u2500 humanoid_view.launch.py\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-package-configuration-files",children:"2. Package Configuration Files"}),"\n",(0,a.jsx)(n.h4,{id:"packagexml",children:(0,a.jsx)(n.code,{children:"package.xml"})}),"\n",(0,a.jsxs)(n.p,{children:["This file declares the ",(0,a.jsx)(n.code,{children:"humanoid_launch"})," package and its dependencies."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-xml",children:'\x3c!-- examples/ros2_launch_example/humanoid_launch/package.xml --\x3e\r\n<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>humanoid_launch</name>\r\n  <version>0.0.0</version>\r\n  <description>ROS 2 launch files for humanoid robot visualization</description>\r\n  <maintainer email="user@example.com">user</maintainer>\r\n  <license>Apache-2.0</license>\r\n\r\n  <buildtool_depend>ament_cmake</buildtool_depend>\r\n  <buildtool_depend>ament_python</buildtool_depend>\r\n\r\n  <depend>launch</depend>\r\n  <depend>launch_ros</depend>\r\n  <depend>robot_state_publisher</depend>\r\n  <depend>rviz2</depend>\r\n  <depend>xacro</depend>\r\n\r\n  <export>\r\n    <build_type>ament_cmake</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,a.jsx)(n.h4,{id:"cmakeliststxt",children:(0,a.jsx)(n.code,{children:"CMakeLists.txt"})}),"\n",(0,a.jsx)(n.p,{children:"This file handles the building and installation of our launch files."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-cmake",children:'\x3c!-- examples/ros2_launch_example/humanoid_launch/CMakeLists.txt --\x3e\r\ncmake_minimum_required(VERSION 3.8)\r\nproject(humanoid_launch)\r\n\r\nif(CMAKE_COMPILER_ID STREQUAL "GNU")\r\n  add_compile_options(-Wall -Wextra -Wpedantic)\r\nendif()\r\n\r\nfind_package(ament_cmake REQUIRED)\r\nfind_package(ament_python REQUIRED)\r\nfind_package(launch REQUIRED)\r\nfind_package(launch_ros REQUIRED)\r\n\r\ninstall(DIRECTORY launch\r\n  DESTINATION share/${PROJECT_NAME}\r\n)\r\n\r\nament_package()\n'})}),"\n",(0,a.jsxs)(n.h3,{id:"3-launch-file-humanoid_viewlaunchpy",children:["3. Launch File (",(0,a.jsx)(n.code,{children:"humanoid_view.launch.py"}),")"]}),"\n",(0,a.jsxs)(n.p,{children:["This Python launch file processes the ",(0,a.jsx)(n.code,{children:"humanoid_macro_example.xacro"})," (which we created in the previous chapter) and launches ",(0,a.jsx)(n.code,{children:"robot_state_publisher"})," and ",(0,a.jsx)(n.code,{children:"rviz2"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# examples/ros2_launch_example/humanoid_launch/launch/humanoid_view.launch.py\r\nimport os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import DeclareLaunchArgument\r\nfrom launch.substitutions import LaunchConfiguration, Command\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n    # Get the launch directory\r\n    humanoid_launch_dir = get_package_share_directory('humanoid_launch')\r\n    \r\n    # Path to your URDF/Xacro file\r\n    xacro_file_path = os.path.join(\r\n        os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..', '..', '..')),\r\n        'examples',\r\n        'humanoid_macro_example.xacro'\r\n    )\r\n    \r\n    # Process the URDF/Xacro file\r\n    robot_description_content = Command(['xacro ', xacro_file_path])\r\n    robot_description = {'robot_description': robot_description_content}\r\n\r\n    # Robot State Publisher Node\r\n    robot_state_publisher_node = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[robot_description]\r\n    )\r\n\r\n    # RViz2 Node\r\n    rviz_node = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        name='rviz2',\r\n        output='screen',\r\n    )\r\n\r\n    return LaunchDescription([\r\n        robot_state_publisher_node,\r\n        rviz_node\r\n    ])\n"})}),"\n",(0,a.jsx)(n.h3,{id:"4-how-to-build-and-run",children:"4. How to Build and Run"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Place the ",(0,a.jsx)(n.code,{children:"humanoid_launch"})," package (",(0,a.jsx)(n.code,{children:"examples/ros2_launch_example/humanoid_launch/"}),") into the ",(0,a.jsx)(n.code,{children:"src/"})," directory of your ROS 2 workspace."]}),"\n",(0,a.jsxs)(n.li,{children:["Ensure you have ",(0,a.jsx)(n.code,{children:"humanoid_macro_example.xacro"})," available as referenced in the launch file."]}),"\n",(0,a.jsxs)(n.li,{children:["From the root of your ROS 2 workspace, build the package:","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select humanoid_launch\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Source your workspace:","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["Launch the file:","\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"ros2 launch humanoid_launch humanoid_view.launch.py\n"})}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["RViz2 should launch, and you should see the humanoid robot model. You may need to add the ",(0,a.jsx)(n.code,{children:"RobotModel"})," display in RViz2 and set its ",(0,a.jsx)(n.code,{children:"Description Source"})," to ",(0,a.jsx)(n.code,{children:"Robot Description"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>l});var i=r(6540);const a={},o=i.createContext(a);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);
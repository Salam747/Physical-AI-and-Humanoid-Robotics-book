"use strict";(globalThis.webpackChunkrobotic_book=globalThis.webpackChunkrobotic_book||[]).push([[402],{8063:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"module1-ros2/rclpy-development","title":"Real-time Python Development with rclpy","description":"This chapter focuses on developing real-time ROS 2 applications using rclpy, the Python client library for ROS 2. You will learn best practices for writing efficient and predictable Python code in a robotics context.","source":"@site/docs/module1-ros2/02-rclpy-development.mdx","sourceDirName":"module1-ros2","slug":"/module1-ros2/rclpy-development","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/rclpy-development","draft":false,"unlisted":false,"editUrl":"https://github.com/yourusername/physical-ai-humanoid-book/tree/main/docs/module1-ros2/02-rclpy-development.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"ROS 2 Architecture","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/ros2-architecture"},"next":{"title":"Creating and Publishing Custom ROS 2 Messages","permalink":"/Physical-AI-and-Humanoid-Robotics-book/docs/module1-ros2/custom-messages"}}');var s=r(4848),l=r(8453);const o={},t="Real-time Python Development with rclpy",c={},a=[{value:"rclpy Fundamentals",id:"rclpy-fundamentals",level:2},{value:"Real-time Considerations in Python",id:"real-time-considerations-in-python",level:2},{value:"Example: Simple rclpy Node",id:"example-simple-rclpy-node",level:2},{value:"1. Publisher Node (<code>examples/ros2_code/minimal_publisher.py</code>)",id:"1-publisher-node-examplesros2_codeminimal_publisherpy",level:3},{value:"2. Subscriber Node (<code>examples/ros2_code/minimal_subscriber.py</code>)",id:"2-subscriber-node-examplesros2_codeminimal_subscriberpy",level:3},{value:"How to Run",id:"how-to-run",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"real-time-python-development-with-rclpy",children:"Real-time Python Development with rclpy"})}),"\n",(0,s.jsxs)(n.p,{children:["This chapter focuses on developing real-time ROS 2 applications using ",(0,s.jsx)(n.code,{children:"rclpy"}),", the Python client library for ROS 2. You will learn best practices for writing efficient and predictable Python code in a robotics context."]}),"\n",(0,s.jsx)(n.h2,{id:"rclpy-fundamentals",children:"rclpy Fundamentals"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Node creation"}),": How to initialize and manage ROS 2 nodes in Python."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Publisher/Subscriber"}),": Implementing data exchange between nodes."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Service client/server"}),": Creating request-response communication patterns."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Action client/server"}),": Handling long-running, goal-oriented tasks."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"real-time-considerations-in-python",children:"Real-time Considerations in Python"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Garbage collection"}),": Understanding its impact and mitigation strategies."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Thread management"}),": Using multi-threading for concurrent operations."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Event loops"}),": Asynchronous programming with ",(0,s.jsx)(n.code,{children:"asyncio"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Performance optimization"}),": Tips and tricks for efficient ",(0,s.jsx)(n.code,{children:"rclpy"})," applications."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"example-simple-rclpy-node",children:"Example: Simple rclpy Node"}),"\n",(0,s.jsxs)(n.p,{children:["The following example demonstrates a basic ",(0,s.jsx)(n.code,{children:"rclpy"})," node by implementing a publisher and a subscriber. These are the same examples used in the previous chapter, highlighting the core ",(0,s.jsx)(n.code,{children:"rclpy"})," functionalities."]}),"\n",(0,s.jsxs)(n.h3,{id:"1-publisher-node-examplesros2_codeminimal_publisherpy",children:["1. Publisher Node (",(0,s.jsx)(n.code,{children:"examples/ros2_code/minimal_publisher.py"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# examples/ros2_code/minimal_publisher.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalPublisher(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello ROS 2: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    minimal_publisher = MinimalPublisher()\r\n    rclpy.spin(minimal_publisher)\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"2-subscriber-node-examplesros2_codeminimal_subscriberpy",children:["2. Subscriber Node (",(0,s.jsx)(n.code,{children:"examples/ros2_code/minimal_subscriber.py"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# examples/ros2_code/minimal_subscriber.py\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\nclass MinimalSubscriber(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    minimal_subscriber = MinimalSubscriber()\r\n    rclpy.spin(minimal_subscriber)\r\n    minimal_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(n.h3,{id:"how-to-run",children:"How to Run"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Open two separate terminal windows."}),"\n",(0,s.jsx)(n.li,{children:"In each terminal, source your ROS 2 environment."}),"\n",(0,s.jsxs)(n.li,{children:["Run the publisher:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 examples/ros2_code/minimal_publisher.py\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In the other terminal, run the subscriber:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"python3 examples/ros2_code/minimal_subscriber.py\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"You should see the subscriber terminal receiving messages from the publisher."})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var i=r(6540);const s={},l=i.createContext(s);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);